@{
    ViewBag.Title = "ข้อมูลลูกค้าใหม่";
    ViewBag.MainMenu = "ระบบจัดการข้อมูลลูกค้า";
    Layout = "~/Views/Shared/_LayoutPartial.cshtml";
}
<div class="row bg-title">
    <!-- .page title -->
    <div class="col-md-5">
        <ol class="breadcrumb pull-left">
            <li><a href="#">@ViewBag.MainMenu</a></li>
            <li class="active">@ViewBag.Title</li>
        </ol>
    </div>

</div>



<div class="row">
    <div class="col-lg-12 ">

        <div class="white-box">

            <h3 class="m-b-0 m-t-0"> <i class="fa fa-user-plus"></i> @ViewBag.Title</h3> <small class="text-muted db"></small>
            <hr>
            <form class="form-horizontal">

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="inputEmail3" class="col-sm-3 control-label">คำนำหน้า : </label>
                            <div class="col-sm-9">
                                <select class="form-control" id="CustomerTitleName">
                                    <option value="นาย">นาย</option>
                                    <option value="นางสาว">นางสาว</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">

                    </div>
                </div>
                <div class="row">

                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="inputEmail3" class="col-sm-3 control-label">ชื่อ : </label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="CustomerFirstName" placeholder="ชื่อ">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="inputEmail3" class="col-sm-3 control-label">นามสกุล : </label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="CustomerLastName" placeholder="นามสกุล">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="inputEmail3" class="col-sm-3 control-label">ชื่อเล่น : </label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="CustomerNickName" placeholder="ชื่อเล่น">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="inputPassword3" class="col-sm-3 control-label">รหัสประจำตัวประชาชน : </label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="CustomerIdCard" placeholder="รหัสประจำตัวประชาชน">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="inputEmail3" class="col-sm-3 control-label">ที่อยู่ 1 : </label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="CustomerAddress1" placeholder="ที่อยู่">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="inputPassword3" class="col-sm-3 control-label">ที่อยู่ 2 : </label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="CustomerAddress2" placeholder="ที่อยู่">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="inputEmail3" class="col-sm-3 control-label">จังหวัด : </label>
                            <div class="col-sm-9">

                                <select class="form-control select2" id="CustomerProvince">
                                    <option>เลือก</option>

                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="inputPassword3" class="col-sm-3 control-label">อำเภอ/เขต : </label>
                            <div class="col-sm-9">
                                <select class="form-control select2" id="CustomerDistrict">
                                    <option selected>เลือก</option>

                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="inputEmail3" class="col-sm-3 control-label">ตำบล/แขวง : </label>
                            <div class="col-sm-9">
                                <select class="form-control select2" id="CustomerSubDistrict">
                                    <option>เลือก</option>
                                </select>

                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="inputPassword3" class="col-sm-3 control-label">รหัสไปรษณีย์ : </label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="CustomerZipCode" placeholder="รหัสไปรษณีย์">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="inputEmail3" class="col-sm-3 control-label">เบอร์โทร : </label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="CustomerMobile" placeholder="เบอร์โทร">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="inputEmail3" class="col-sm-3 control-label">อีเมลล์: </label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="CustomerEmail" placeholder="อีเมลล์">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">

                    <div class="col-md-7">
                        <div class="form-group pull-right">
                            <div id="loadIndicator"></div>  
                             <button type="button" class="btn btn-info waves-effect waves-light m-r-10" onclick="AddCustomer()"> 
                            <i class="fa fa-save"></i> บันทึก</button>
                            <button type="button" class="btn btn-default waves-effect waves-light m-r-10" onclick="btnClear()">ยกเลิก</button>

                        </div>
                    </div>

                </div>

            </form>
            


        </div>
    </div>

</div>
@section Scripts {
    @Scripts.Render("../Scripts/src/customers_src.js")

    <script>
        $(function () {
            $(".select2").select2();

            $.get("../Setting/GetProvince", function (obj) {

                $.each(obj.data, function (key, value) {
                    $("#CustomerProvince").append('<option value="' + value.ProvinceID + '"' + ">" + value.ProvinceName + "</option>");
                });
            });



            $("#CustomerProvince").change(function () {

                // ล้างข้อมูลเดิม
                $('#CustomerDistrict')
                .find('option')
                .remove()
                .end()
                .append('<option selected>เลือก</option>');

                $('#CustomerSubDistrict')
               .find('option')
               .remove()
               .end()
               .append('<option selected>เลือก</option>');
                ;

                $.get("../Setting/GetDistrict/" + $('#CustomerProvince').val(), function (obj) {
                    $.each(obj.data, function (key, value) {
                        $("#CustomerDistrict").append('<option value="' + value.DistrictID + '"' + ">" + value.DistrictName + "</option>");
                    });
                });
                $("#select2-chosen-2").text('เลือก');
                $("#select2-chosen-3").text('เลือก');
            });

            $("#CustomerDistrict").change(function () {
                $('#CustomerSubDistrict')
                .find('option')
                .remove()
                .end()
                .append('<option selected>เลือก</option>');


                $.get("../Setting/GetSubDistrict/" + $('#CustomerDistrict').val(), function (obj) {
                    $.each(obj.data, function (key, value) {
                        $("#CustomerSubDistrict").append('<option value="' + value.SubDistrictID + '"' + ">" + value.SubDistrictName + "</option>");
                    });
                });
                $("#select2-chosen-3").text('เลือก');

            });
            $("#CustomerSubDistrict").change(function () {
                $.get("../Setting/GetZipCode/" + $('#CustomerSubDistrict').val(),
                    function (obj) {
                        console.log(obj.data);
                        $('#CustomerZipCode').val(obj.data[0].SubDistrictZipCode);
                });
            });
        })
    </script>
}
